 <blockquote>HTTPSQS is a Simple Queue Service based on HTTP GET/POST protocol. 
</blockquote><blockquote>This is free software, and you are welcome to modify and redistribute it under the New BSD License. 
</blockquote><blockquote><a href="http://blog.s135.com/httpsqs/" rel="nofollow">点击这里查看简体中文使用说明 (Click here to see the Simplified Chinese instructions)</a> 
</blockquote><h2><a name="1._Features"></a>1. Features<a href="#1._Features" class="section_anchor"></a></h2><ul><li>Very simple </li></ul><ul><li>Very fast, more than 10000 requests/sec </li></ul><ul><li>High concurrency, support the tens of thousands of concurrent connections. </li></ul><ul><li>Multiple queue </li></ul><ul><li>A single queue length maximum support one billion (1,000,000,000). </li></ul><ul><li>Low memory consumption, mass data storage, storage dozens of GB of data takes less than 100MB of physical memory buffer. </li></ul><ul><li>Convenient to change the maximum queue length of per-queue. </li></ul><ul><li>Queue status view </li></ul><ul><li>Be able to view the contents of the specified queue ID. </li></ul><ul><li>Multi-Character encoding support </li></ul><ul><li>Less than 900 lines source code, easy to second development. </li></ul><hr><h2><a name="2._Benchmark_Test"></a>2. Benchmark Test<a href="#2._Benchmark_Test" class="section_anchor"></a></h2><blockquote><a href="http://code.google.com/p/httpsqs/wiki/BenchmarkTest" rel="nofollow">Using Apache AB for HTTPSQS Benchmark Test</a> 
</blockquote><hr><p><img src="http://blog.s135.com/attachment/200912/httpsqs_elements.png"> </p><hr><h2><a name="3._Server_Install"></a>3. Server Install<a href="#3._Server_Install" class="section_anchor"></a></h2><blockquote>Operating System: CentOS Linux 5.4 
</blockquote><pre class="prettyprint"><span class="pln">ulimit </span><span class="pun">-</span><span class="typ">SHn</span><span class="pln"> </span><span class="lit">65535</span><span class="pln"><br><br>wget http</span><span class="pun">:</span><span class="com">//httpsqs.googlecode.com/files/libevent-2.0.12-stable.tar.gz</span><span class="pln"><br>tar zxvf libevent</span><span class="pun">-</span><span class="lit">2.0</span><span class="pun">.</span><span class="lit">12</span><span class="pun">-</span><span class="pln">stable</span><span class="pun">.</span><span class="pln">tar</span><span class="pun">.</span><span class="pln">gz<br>cd libevent</span><span class="pun">-</span><span class="lit">2.0</span><span class="pun">.</span><span class="lit">12</span><span class="pun">-</span><span class="pln">stable</span><span class="pun">/</span><span class="pln"><br></span><span class="pun">./</span><span class="pln">configure </span><span class="pun">--</span><span class="pln">prefix</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">libevent</span><span class="pun">-</span><span class="lit">2.0</span><span class="pun">.</span><span class="lit">12</span><span class="pun">-</span><span class="pln">stable</span><span class="pun">/</span><span class="pln"><br>make<br>make install<br>cd </span><span class="pun">../</span><span class="pln"><br><br>wget http</span><span class="pun">:</span><span class="com">//httpsqs.googlecode.com/files/tokyocabinet-1.4.47.tar.gz</span><span class="pln"><br>tar zxvf tokyocabinet</span><span class="pun">-</span><span class="lit">1.4</span><span class="pun">.</span><span class="lit">47.tar</span><span class="pun">.</span><span class="pln">gz<br>cd tokyocabinet</span><span class="pun">-</span><span class="lit">1.4</span><span class="pun">.</span><span class="lit">47</span><span class="pun">/</span><span class="pln"><br></span><span class="pun">./</span><span class="pln">configure </span><span class="pun">--</span><span class="pln">prefix</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">tokyocabinet</span><span class="pun">-</span><span class="lit">1.4</span><span class="pun">.</span><span class="lit">47</span><span class="pun">/</span><span class="pln"><br></span><span class="com">#Note: In the 32-bit Linux operating system, compiler Tokyo cabinet, please use the ./configure --enable-off64 instead of ./configure to breakthrough the filesize limit of 2GB.</span><span class="pln"><br></span><span class="com">#./configure --enable-off64 --prefix=/usr/local/tokyocabinet-1.4.47/</span><span class="pln"><br>make<br>make install<br>cd </span><span class="pun">../</span><span class="pln"><br><br>wget http</span><span class="pun">:</span><span class="com">//httpsqs.googlecode.com/files/httpsqs-1.7.tar.gz</span><span class="pln"><br>tar zxvf httpsqs</span><span class="pun">-</span><span class="lit">1.7</span><span class="pun">.</span><span class="pln">tar</span><span class="pun">.</span><span class="pln">gz<br>cd httpsqs</span><span class="pun">-</span><span class="lit">1.7</span><span class="pun">/</span><span class="pln"><br>make<br>make install<br>cd </span><span class="pun">../</span></pre><hr><h2><a name="4._Server_Document"></a>4. Server Document<a href="#4._Server_Document" class="section_anchor"></a></h2><blockquote><img src="http://blog.s135.com/attachment/201006/httpsqs.png"> 
</blockquote><blockquote><tt>[root@xoyo ~]# httpsqs -h</tt> 
</blockquote><pre class="prettyprint"><span class="pln">&nbsp;</span><span class="pun">-</span><span class="pln">l </span><span class="str">&lt;ip_addr&gt;</span><span class="pln"> &nbsp;</span><span class="kwd">interface</span><span class="pln"> to listen on</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">.</span><span class="lit">0.0</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">p </span><span class="str">&lt;num&gt;</span><span class="pln"> &nbsp; &nbsp; &nbsp;TCP port number to listen on </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1218</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">x </span><span class="str">&lt;path&gt;</span><span class="pln"> &nbsp; &nbsp; database directory </span><span class="pun">(</span><span class="pln">example</span><span class="pun">:</span><span class="pln"> </span><span class="str">/opt/</span><span class="pln">httpsqs</span><span class="pun">/</span><span class="pln">data</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">t </span><span class="str">&lt;second&gt;</span><span class="pln"> &nbsp; timeout </span><span class="kwd">for</span><span class="pln"> an http request </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">s </span><span class="str">&lt;second&gt;</span><span class="pln"> &nbsp; the interval to sync updated contents to the disk </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="lit">5</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">c </span><span class="str">&lt;num&gt;</span><span class="pln"> &nbsp; &nbsp; &nbsp;the maximum number of non</span><span class="pun">-</span><span class="pln">leaf nodes to be cached </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1024</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">m </span><span class="str">&lt;size&gt;</span><span class="pln"> &nbsp; &nbsp; database memory cache size </span><span class="kwd">in</span><span class="pln"> MB </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="lit">100</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">i </span><span class="str">&lt;file&gt;</span><span class="pln"> &nbsp; &nbsp; save PID </span><span class="kwd">in</span><span class="pln"> </span><span class="str">&lt;file&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">default</span><span class="pun">:</span><span class="pln"> </span><span class="str">/tmp/</span><span class="pln">httpsqs</span><span class="pun">.</span><span class="pln">pid</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">a </span><span class="str">&lt;auth&gt;</span><span class="pln"> &nbsp; &nbsp; the auth password to access httpsqs </span><span class="pun">(</span><span class="pln">example</span><span class="pun">:</span><span class="pln"> mypass123</span><span class="pun">)</span><span class="pln"><br>&nbsp;</span><span class="pun">-</span><span class="pln">d &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;run </span><span class="kwd">as</span><span class="pln"> a daemon<br>&nbsp;</span><span class="pun">-</span><span class="pln">h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="kwd">print</span><span class="pln"> </span><span class="kwd">this</span><span class="pln"> help </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">exit</span></pre><blockquote>Example: 
</blockquote><pre class="prettyprint"><span class="pln">ulimit </span><span class="pun">-</span><span class="typ">SHn</span><span class="pln"> </span><span class="lit">65535</span><span class="pln"><br>httpsqs </span><span class="pun">-</span><span class="pln">d </span><span class="pun">-</span><span class="pln">p </span><span class="lit">1218</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">/</span><span class="pln">data0</span><span class="pun">/</span><span class="pln">queue</span></pre><blockquote>or with auth password: 
</blockquote><pre class="prettyprint"><span class="pln">ulimit </span><span class="pun">-</span><span class="typ">SHn</span><span class="pln"> </span><span class="lit">65535</span><span class="pln"><br>httpsqs </span><span class="pun">-</span><span class="pln">d </span><span class="pun">-</span><span class="pln">p </span><span class="lit">1218</span><span class="pln"> </span><span class="pun">-</span><span class="pln">x </span><span class="pun">/</span><span class="pln">data0</span><span class="pun">/</span><span class="pln">queue </span><span class="pun">-</span><span class="pln">a mypass123</span></pre><blockquote>Use command "killall httpsqs", "pkill httpsqs" and "kill <tt>cat /tmp/httpsqs.pid</tt>" to stop httpsqs. 
</blockquote><blockquote>Please note that don't use the command "pkill -9 httpsqs" and "kill -9 PID of httpsqs", otherwise, the data in memory has not been saved to disk will be lost. 
</blockquote><hr><h2><a name="5._Client_Document"></a>5. Client Document<a href="#5._Client_Document" class="section_anchor"></a></h2><blockquote>Important Notice: The message must be GET before the PUT position to catch up with the GET position in the circle. 
</blockquote><h4><a name="(1)._PUT_text_message_into_a_queue"></a>(1). PUT text message into a queue<a href="#(1)._PUT_text_message_into_a_queue" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=put&amp;data=url_encoded_text_message&amp;auth=mypass123"</span></pre><blockquote>or  
</blockquote><blockquote>HTTP POST protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="pun">-</span><span class="pln">d </span><span class="str">"url_encoded_text_message"</span><span class="pln"> </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=put&amp;auth=mypass123"</span></pre><blockquote>Using google chrome browser for example: 
</blockquote><blockquote><img src="http://blog.s135.com/attachment/200912/put.png"> 
</blockquote><blockquote>If PUT successful, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_PUT_OK</span></pre><blockquote>If an error occurs, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_PUT_ERROR</span></pre><blockquote>If Queue full, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_PUT_END</span></pre><blockquote>HTTPSQS add a line "Pos: xxx" in the HTTP header and sends that back to the client since version 1.2, the "xxx" is the put pos of the current queue. For example: 
</blockquote><pre class="prettyprint"><span class="pln">HTTP</span><span class="pun">/</span><span class="lit">1.1</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> OK<br></span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Type</span><span class="pun">:</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">plain<br></span><span class="typ">Keep</span><span class="pun">-</span><span class="typ">Alive</span><span class="pun">:</span><span class="pln"> </span><span class="lit">120</span><span class="pln"><br></span><span class="typ">Pos</span><span class="pun">:</span><span class="pln"> </span><span class="lit">19</span><span class="pln"><br></span><span class="typ">Date</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Thu</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="typ">Mar</span><span class="pln"> </span><span class="lit">2010</span><span class="pln"> </span><span class="lit">04</span><span class="pun">:</span><span class="lit">57</span><span class="pun">:</span><span class="lit">08</span><span class="pln"> GMT<br></span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Length</span><span class="pun">:</span><span class="pln"> </span><span class="lit">14</span><span class="pln"><br><br>HTTPSQS_PUT_OK</span></pre><h4><a name="(2)._GET_text_message_from_a_queue"></a>(2). GET text message from a queue<a href="#(2)._GET_text_message_from_a_queue" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?charset=utf-8&amp;name=your_queue_name&amp;opt=get&amp;auth=mypass123"</span></pre><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?charset=gb2312&amp;name=your_queue_name&amp;opt=get&amp;auth=mypass123"</span></pre><blockquote>Using google chrome browser for example: 
</blockquote><blockquote><img src="http://blog.s135.com/attachment/200912/get.png"> 
</blockquote><blockquote>Return the queue contents. 
</blockquote><blockquote>If there is no unread queue message, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_GET_END</span></pre><blockquote>HTTPSQS add a line "Pos: xxx" in the HTTP header and sends that back to the client since version 1.2, the "xxx" is the get pos of the current queue. For example: 
</blockquote><pre class="prettyprint"><span class="pln">HTTP</span><span class="pun">/</span><span class="lit">1.1</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> OK<br></span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Type</span><span class="pun">:</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">plain</span><span class="pun">;</span><span class="pln"> charset</span><span class="pun">=</span><span class="pln">utf</span><span class="pun">-</span><span class="lit">8</span><span class="pln"><br></span><span class="typ">Keep</span><span class="pun">-</span><span class="typ">Alive</span><span class="pun">:</span><span class="pln"> </span><span class="lit">120</span><span class="pln"><br></span><span class="typ">Pos</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7</span><span class="pln"><br></span><span class="typ">Date</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Thu</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="typ">Mar</span><span class="pln"> </span><span class="lit">2010</span><span class="pln"> </span><span class="lit">04</span><span class="pun">:</span><span class="lit">56</span><span class="pun">:</span><span class="lit">01</span><span class="pln"> GMT<br></span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Length</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7</span><span class="pln"><br><br>message</span></pre><blockquote><h4><a name="The_charset_parameter_(Example:_/?charset=utf-8):"></a>The charset parameter (Example: /?charset=utf-8):<a href="#The_charset_parameter_(Example:_/?charset=utf-8):" class="section_anchor"></a></h4>
Documents transmitted with HTTP that are of type text, such as text/html, text/plain, etc., can send a charset parameter in the HTTP header to specify the character encoding of the document.  
</blockquote><blockquote>It is very important to always label Web documents explicitly. HTTP 1.1 says that the default charset is ISO-8859-1. But there are too many unlabeled documents in other encodings, so browsers use the reader's preferred encoding when there is no explicit charset parameter. 
</blockquote><blockquote>The line in the HTTP header typically looks like this: 
</blockquote><blockquote>Content-Type: text/plain; charset=utf-8 
</blockquote><blockquote>In theory, any character encoding that has been <a href="http://www.iana.org/assignments/character-sets" rel="nofollow">registered with IANA</a> can be used, but there is no browser that understands all of them.  
</blockquote><h4><a name="(3)._View_queue_status"></a>(3). View queue status<a href="#(3)._View_queue_status" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=status&amp;auth=mypass123"</span></pre><blockquote>Return (for example): 
</blockquote><pre class="prettyprint"><span class="pln">HTTP </span><span class="typ">Simple</span><span class="pln"> </span><span class="typ">Queue</span><span class="pln"> </span><span class="typ">Service</span><span class="pln"> v1</span><span class="pun">.</span><span class="lit">3</span><span class="pln"><br></span><span class="pun">------------------------------</span><span class="pln"><br></span><span class="typ">Queue</span><span class="pln"> </span><span class="typ">Name</span><span class="pun">:</span><span class="pln"> xoyo<br></span><span class="typ">Maximum</span><span class="pln"> number of queues</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1000000</span><span class="pln"><br></span><span class="typ">Put</span><span class="pln"> position of queue </span><span class="pun">(</span><span class="lit">1st</span><span class="pln"> lap</span><span class="pun">):</span><span class="pln"> </span><span class="lit">45</span><span class="pln"><br></span><span class="typ">Get</span><span class="pln"> position of queue </span><span class="pun">(</span><span class="lit">1st</span><span class="pln"> lap</span><span class="pun">):</span><span class="pln"> </span><span class="lit">6</span><span class="pln"><br></span><span class="typ">Number</span><span class="pln"> of unread queue</span><span class="pun">:</span><span class="pln"> </span><span class="lit">39</span></pre><blockquote>or if the "Put position of queue" greater than the "Maximum number of queues", it will come back to the pos 1. 
</blockquote><pre class="prettyprint"><span class="pln">HTTP </span><span class="typ">Simple</span><span class="pln"> </span><span class="typ">Queue</span><span class="pln"> </span><span class="typ">Service</span><span class="pln"> v1</span><span class="pun">.</span><span class="lit">3</span><span class="pln"><br></span><span class="pun">------------------------------</span><span class="pln"><br></span><span class="typ">Queue</span><span class="pln"> </span><span class="typ">Name</span><span class="pun">:</span><span class="pln"> xoyo<br></span><span class="typ">Maximum</span><span class="pln"> number of queues</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1000000</span><span class="pln"><br></span><span class="typ">Put</span><span class="pln"> position of queue </span><span class="pun">(</span><span class="lit">2st</span><span class="pln"> lap</span><span class="pun">):</span><span class="pln"> </span><span class="lit">4562</span><span class="pln"><br></span><span class="typ">Get</span><span class="pln"> position of queue </span><span class="pun">(</span><span class="lit">1st</span><span class="pln"> lap</span><span class="pun">):</span><span class="pln"> </span><span class="lit">900045</span><span class="pln"><br></span><span class="typ">Number</span><span class="pln"> of unread queue</span><span class="pun">:</span><span class="pln"> </span><span class="lit">104517</span></pre><blockquote>Using google chrome browser for example: 
</blockquote><blockquote><img src="http://blog.s135.com/attachment/200912/status.png"> 
</blockquote><h4><a name="(4)._View_queue_status_in_json"></a>(4). View queue status in json<a href="#(4)._View_queue_status_in_json" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=status_json&amp;auth=mypass123"</span></pre><blockquote>Return (for example): 
</blockquote><pre class="prettyprint"><span class="pun">{</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"xoyo"</span><span class="pun">,</span><span class="str">"maxqueue"</span><span class="pun">:</span><span class="lit">1000000</span><span class="pun">,</span><span class="str">"putpos"</span><span class="pun">:</span><span class="lit">45</span><span class="pun">,</span><span class="str">"putlap"</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="str">"getpos"</span><span class="pun">:</span><span class="lit">6</span><span class="pun">,</span><span class="str">"getlap"</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="str">"unread"</span><span class="pun">:</span><span class="lit">39</span><span class="pun">}</span></pre><blockquote>or if the "Put position of queue" greater than the "Maximum number of queues", it will come back to the pos 1. 
</blockquote><pre class="prettyprint"><span class="pun">{</span><span class="str">"name"</span><span class="pun">:</span><span class="str">"xoyo"</span><span class="pun">,</span><span class="str">"maxqueue"</span><span class="pun">:</span><span class="lit">1000000</span><span class="pun">,</span><span class="str">"putpos"</span><span class="pun">:</span><span class="lit">4562</span><span class="pun">,</span><span class="str">"putlap"</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="str">"getpos"</span><span class="pun">:</span><span class="lit">900045</span><span class="pun">,</span><span class="str">"getlap"</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="str">"unread"</span><span class="pun">:</span><span class="lit">104517</span><span class="pun">}</span></pre><h4><a name="(5)._View_the_contents_of_the_specified_queue_pos_(id)"></a>(5). View the contents of the specified queue pos (id)<a href="#(5)._View_the_contents_of_the_specified_queue_pos_(id)" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?charset=utf-8&amp;name=your_queue_name&amp;opt=view&amp;pos=5&amp;auth=mypass123"</span></pre><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?charset=gb2312&amp;name=your_queue_name&amp;opt=view&amp;pos=19&amp;auth=mypass123"</span></pre><blockquote>pos &gt;=1 and &lt;= 1000000000 
</blockquote><blockquote>Return the contents of the specified queue pos. 
</blockquote><h4><a name="(6)._Reset_the_queue"></a>(6). Reset the queue<a href="#(6)._Reset_the_queue" class="section_anchor"></a></h4><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=reset&amp;auth=mypass123"</span></pre><blockquote>If reset successful, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_RESET_OK</span></pre><blockquote>If an error occurs, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_RESET_ERROR</span></pre><h4><a name="(7)._Change_the_maximum_queue_length_of_per-queue"></a>(7). Change the maximum queue length of per-queue<a href="#(7)._Change_the_maximum_queue_length_of_per-queue" class="section_anchor"></a></h4><blockquote>Default maximum queue length: 1000000 
</blockquote><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=maxqueue&amp;num=1000000000&amp;auth=mypass123"</span></pre><blockquote>num &gt;=10 and &lt;= 1000000000 
</blockquote><blockquote>If change the maximum queue length successful, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_MAXQUEUE_OK</span></pre><blockquote>This operation will be cancelled if "Put position of queue" less than "Get position of queue" (lap of PUT &gt; lap of GET), will return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_MAXQUEUE_CANCEL</span></pre><h4><a name="(8)._Change_the_interval_to_sync_updated_contents_to_the_disk"></a>(8). Change the interval to sync updated contents to the disk<a href="#(8)._Change_the_interval_to_sync_updated_contents_to_the_disk" class="section_anchor"></a></h4><blockquote>Default interval: 5 seconds or the parameter set by "httpsqs -s second" 
</blockquote><blockquote>HTTP GET protocol (Using curl for example): 
</blockquote><pre class="prettyprint"><span class="pln">curl </span><span class="str">"http://host:port/?name=your_queue_name&amp;opt=synctime&amp;num=10&amp;auth=mypass123"</span></pre><blockquote>num &gt;=1 and &lt;= 1000000000 
</blockquote><blockquote>If change the interval successful, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_SYNCTIME_OK</span></pre><blockquote>If "num" not between 1 to 1000000000, will return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_SYNCTIME_CANCEL</span></pre><h4><a name="(9)._Authentication_failed"></a>(9). Authentication failed<a href="#(9)._Authentication_failed" class="section_anchor"></a></h4><blockquote>If password(/?auth=xxx) authentication failed, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_AUTH_FAILED</span></pre><h4><a name="(10)._Global_error"></a>(10). Global error<a href="#(10)._Global_error" class="section_anchor"></a></h4><blockquote>If an global error occurs, return: 
</blockquote><pre class="prettyprint"><span class="pln">HTTPSQS_ERROR</span></pre><hr><h2><a name="6._Client_Document"></a>6. Client Document<a href="#6._Client_Document" class="section_anchor"></a></h2><h4><a name="(1)._PHP_Client"></a>(1). PHP Client<a href="#(1)._PHP_Client" class="section_anchor"></a></h4><blockquote>A、PHP ext: <a href="http://code.google.com/p/php-httpsqs-client/" rel="nofollow">http://code.google.com/p/php-httpsqs-client/</a> 
</blockquote><blockquote>B、PHP Class: View source code: <a href="http://code.google.com/p/httpsqs/source/browse/trunk/client/php/httpsqs_client.php" rel="nofollow">httpsqs_client.php</a> 
</blockquote><blockquote>Usage: 
</blockquote><pre class="prettyprint"><span class="pun">&lt;?</span><span class="pln">php<br>include_once</span><span class="pun">(</span><span class="str">"httpsqs_client.php"</span><span class="pun">);</span><span class="pln"><br>$httpsqs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> httpsqs</span><span class="pun">(</span><span class="pln">$httpsqs_host</span><span class="pun">,</span><span class="pln"> $httpsqs_port</span><span class="pun">,</span><span class="pln"> $httpsqs_auth</span><span class="pun">,</span><span class="pln"> $httpsqs_charset</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>1. PUT text message into a queue.<br>&nbsp; &nbsp;If PUT successful, return boolean: true<br>&nbsp; &nbsp;If an error occurs, return boolean: false<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">put</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">,</span><span class="pln"> $queue_data</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>2. GET text message from a queue.<br>&nbsp; &nbsp;Return the queue contents.<br>&nbsp; &nbsp;If there is no unread queue message, return text: HTTPSQS_GET_END<br>&nbsp; &nbsp;If an error occurs, return boolean: false.<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">);</span><span class="pln"> <br><br></span><span class="com">/*<br>3. GET text message and pos from a queue.<br>&nbsp; &nbsp;Return example: array("pos" =&gt; 7, "data" =&gt; "text message")<br>&nbsp; &nbsp;If there is no unread queue message, return: array("pos" =&gt; 0, "data" =&gt; "HTTPSQS_GET_END")<br>&nbsp; &nbsp;If an error occurs, return boolean: false.<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">gets</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>4. View queue status<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">status</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">);</span><span class="pln"> <br><br></span><span class="com">/*<br>5. View queue status in json<br>&nbsp; &nbsp;Return example: {"name":"queue_name","maxqueue":5000000,"putpos":130,"putlap":1,"getpos":120,"getlap":1,"unread":10}<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">status_json</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>6. View the contents of the specified queue pos (id).<br>&nbsp; &nbsp;Return the contents of the specified queue pos.<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">view</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">,</span><span class="pln"> $queue_pos</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>7. Reset the queue.<br>&nbsp; &nbsp;If reset successful, return boolean: true<br>&nbsp; &nbsp;If an error occurs, return boolean: false<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">reset</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>8. Change the maximum queue length of per-queue.<br>&nbsp; &nbsp;If change the maximum queue length successful, return boolean: true<br>&nbsp; &nbsp;If it be cancelled, return boolean: false<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">maxqueue</span><span class="pun">(</span><span class="pln">$queue_name</span><span class="pun">,</span><span class="pln"> $num</span><span class="pun">);</span><span class="pln"><br><br></span><span class="com">/*<br>9. Change the interval to sync updated contents to the disk.<br>&nbsp; &nbsp;If change the interval successful, return boolean: true<br>&nbsp; &nbsp;If it be cancelled, return boolean: false<br>*/</span><span class="pln"><br>$result </span><span class="pun">=</span><span class="pln"> $httpsqs</span><span class="pun">-&gt;</span><span class="pln">synctime</span><span class="pun">(</span><span class="pln">$num</span><span class="pun">);</span><span class="pln"><br></span><span class="pun">?&gt;</span></pre><h4><a name="(2)._Perl_Client_(Third_Party,_Developer:_)"></a>(2). Perl Client (Third Party, Developer: <a href="http://code.google.com/u/tonny0830/" rel="nofollow">tonny0830</a>)<a href="#(2)._Perl_Client_(Third_Party,_Developer:_)" class="section_anchor"></a></h4><blockquote>Perl client file path: httpsqs-1.3/client/perl/ 
</blockquote><blockquote>View source code: <a href="http://code.google.com/p/httpsqs/source/browse/trunk/client/perl/" rel="nofollow">http://code.google.com/p/httpsqs/source/browse/trunk/client/perl/</a> 
</blockquote><h4><a name="(3)._Java_Client_(Third_Party,_Developer:_)"></a>(3). Java Client (Third Party, Developer: <a href="http://code.google.com/u/SuperSNY/" rel="nofollow">SuperSNY</a>)<a href="#(3)._Java_Client_(Third_Party,_Developer:_)" class="section_anchor"></a></h4><blockquote>Download: <a href="http://httpsqs.googlecode.com/files/httpsqs4j-java-client-1.0.zip" rel="nofollow">http://httpsqs.googlecode.com/files/httpsqs4j-java-client-1.0.zip</a> 
</blockquote><blockquote>New code: svn checkout <a href="http://httpsqs.googlecode.com/svn/trunk/client/httpsqs4j/" rel="nofollow">http://httpsqs.googlecode.com/svn/trunk/client/httpsqs4j/</a> httpsqs4j 
</blockquote><blockquote>Documentation: <a href="http://blog.s135.com/book/httpsqs/client/httpsqs4j/" rel="nofollow">http://blog.s135.com/book/httpsqs/client/httpsqs4j/</a> 
</blockquote>
